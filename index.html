<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>測定データ一覧</title>
  <link rel="icon" href="favicon.ico" />
  <!-- DataTables CSS -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css" />
  <!-- Custom CSS -->
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>
  <header role="banner">
    <h1>測定データ一覧</h1>
    <button aria-label="ダークモードを切り替える" onclick="toggleDarkMode()">🌙</button>
    <button aria-label="CSVをダウンロード" onclick="downloadCSV()">📥</button>
    <span id="ngCount">異常判定：0件</span>
  </header>

  <main>
    <h2>データ一覧テーブル</h2>
    <table id="dataTable" class="display" role="table">
      <thead>
        <tr role="row">
          <th scope="col">機体名</th>
          <th scope="col">測定日時</th>
          <th scope="col">判定結果</th>
          <th scope="col">操作</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </main>

  <!-- 詳細モーダル -->
  <div id="detailModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="detailTitle">
    <div class="modal-content">
      <span class="modal-close" role="button" tabindex="0" onclick="closeModal()" aria-label="モーダルを閉じる">×</span>
      <h3 id="detailTitle">詳細情報</h3>
      <p><strong>機体名:</strong> <span id="modalName"></span></p>
      <p><strong>測定日時:</strong> <span id="modalTime"></span></p>
      <p><strong>判定結果:</strong> <span id="modalResult" class="badge"></span></p>
    </div>
  </div>

  <!-- 編集モーダル -->
  <div id="editModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="editTitle">
    <div class="modal-content">
      <span class="modal-close" role="button" tabindex="0" onclick="closeModal()" aria-label="モーダルを閉じる">×</span>
      <h3 id="editTitle">編集フォーム</h3>
      <form onsubmit="saveEdit(); return false;">
        <input type="hidden" id="editIndex" />
        <label for="editName">機体名</label>
        <input type="text" id="editName" name="editName" />

        <label for="editTime">測定日時</label>
        <input type="text" id="editTime" name="editTime" />

        <label for="editResult">判定結果</label>
        <select id="editResult" name="editResult">
          <option value="">N/A</option>
          <option value="OK">OK</option>
          <option value="NG">NG</option>
        </select>

        <button type="submit" class="save-btn">保存</button>
      </form>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js" defer></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js" defer></script>
  <script src="assets/js/main.js" defer></script>
</body>
</html>
